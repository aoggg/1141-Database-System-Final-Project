{% extends "base.html" %}

{% block content %}

<div class="profile-container" style="max-width: 800px; margin: 0 auto;">

    <div style="background: #e9ecef; padding: 20px; border-radius: 10px; text-align: center;">
        <h1 style="margin: 0;">{{ user['name'] }}</h1>
        <p style="color: gray;">@{{ user['username'] }} | {{ user['organization'] }}</p>
        <p>
            <strong>è¯çµ¡é›»è©±ï¼š</strong>
            {% if phones %}
                {% for p in phones %}
                    <span>{{ p['phone_number'] }}</span>
                    {% if not loop.last %}, {% endif %}
                {% endfor %}
            {% else %}
                <span style="color: red;">(å°šæœªç¶å®šé›»è©±)</span>
            {% endif %}
        </p>
        <div style="margin-top: 10px;">
            <h2 style="margin: 0; color: #ffc107; display: inline-block;">
                â­ {{ "%.1f"|format(user['avg_score']) }}
            </h2>
            <span style="color: gray;"> ({{ user['review_count'] }} å‰‡è©•åƒ¹)</span>
        </div>
    </div>

    <hr>

    <h3>{{ user['name'] }} ä¹‹å‰çš„è©•åƒ¹</h3>
    <ul>
        {% for comment in comments %}
            <li>
                <strong> {{comment['rating']}} </strong> | {{comment['comment_str']}}
            </li>
        {% endfor %}
    </ul>

    <h3>{{ user['name'] }} çš„åˆŠç™»ç´€éŒ„</h3>
    
    {% if posts %}
        <ul style="list-style: none; padding: 0;">
        {% for post in posts %}
            <li style="border-bottom: 1px solid #eee; padding: 15px 0;">
                <div style="font-weight: bold; font-size: 1.1em;">
                    {{ post['description'] }}
                </div>
                
                <div style="color: gray; font-size: 0.9em; margin: 5px 0;">
                    ç™¼å¸ƒæ–¼ {{ post['post_time'] }} | åŒ…å« {{ post['item_count'] }} æ¨£ç‰©å“
                </div>

                <div>
                    {% if post['available'] %}
                        <span style="color: green; border: 1px solid green; padding: 2px 6px; border-radius: 4px; font-size: 0.8em;">ğŸŸ¢ é€²è¡Œä¸­</span>
                    {% else %}
                        <span style="color: red; border: 1px solid red; padding: 2px 6px; border-radius: 4px; font-size: 0.8em;">ğŸ”´ å·²çµæ¡ˆ</span>
                    {% endif %}
                </div>
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p style="text-align: center; color: gray;">é€™ä½ä½¿ç”¨è€…é‚„æ²’æœ‰åˆŠç™»éä»»ä½•æ±è¥¿ã€‚</p>
    {% endif %}

    <div style="margin-top: 30px; text-align: center;">
        <a href="{{ url_for('index') }}" class="btn">â¬…ï¸ è¿”å›é¦–é </a>
    </div>

</div>

{% endblock %}