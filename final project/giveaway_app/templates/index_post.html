{% extends "base.html" %}

{% block content %}
    <div class="view-switch-container" style="margin-bottom: 20px;">
        <a href="/?view=post" class="btn btn-switch">ğŸ“‹ è²¼æ–‡æª¢è¦–</a>
        <a href="/?view=item" class="btn btn-switch active">ğŸ“¦ ç‰©å“æª¢è¦–</a>
    </div>
    {% for post in posts %}
    
        <div style="border: 1px solid black; margin: 20px; padding: 10px;">
            <h3>[è²¼æ–‡ ID: {{ post['post_id'] }}] {{ post['description'] }}</h3>
            <p>
                <!-- åœ°é»: {{ post['location_name'] }} |  -->
                ç‹€æ…‹: {{ 'é€²è¡Œä¸­' if post['available'] else 'å·²çµæ¡ˆ' }}
            </p>

            <ul>
                {% for item in post['items'] %}
                <li>
                    <strong>{{ item['item_name'] }}</strong> 
                    (å‰©é¤˜æ•¸é‡: {{ item['quantity'] }})
                    
                    {% if post['available'] and item['quantity'] > 0 %}
                        <form action="{{ url_for('claim', item_id=item['item_id']) }}" method="POST" style="display: inline;">
                            <input type="number" name="want_quantity" value="1" min="1" max="{{ item['quantity'] }}">
                            <button type="submit">ç´¢å–</button>
                        </form>
                    {% else %}
                        <span>(ç„¡æ³•ç´¢å–)</span>
                    {% endif %}
                </li>
                {% else %}
                    <li>æ­¤è²¼æ–‡æ²’æœ‰ç‰©å“ (å‡ºå¤§äº‹å“‡)</li>
                {% endfor %}
            </ul>
        </div>

    {% else %}
        <p>ç›®å‰å®Œå…¨æ²’æœ‰è²¼æ–‡è³‡æ–™ã€‚</p>
    {% endfor %}

{% endblock %}