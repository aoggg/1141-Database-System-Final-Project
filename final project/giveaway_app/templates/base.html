<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}CampusShare{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f7f5f2; }
        .nav-active { border-bottom: 3px solid #FF6B00; color: #FF6B00; }
    </style>
    {% block head %}{% endblock %}
</head>
<body class="flex flex-col min-h-screen">

    <nav class="bg-black text-white shadow-xl sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex items-center justify-between">
            <a href="/" class="flex items-center space-x-2">
                <span class="text-2xl font-bold text-[#FF6B00]">CampusShare</span>
                <span class="bg-[#FF6B00] text-white text-[10px] px-2 py-0.5 rounded-full uppercase">Beta</span>
            </a>
            
            <div class="hidden md:flex space-x-8 text-sm font-medium">
                <a href="{{ url_for('index', view='post') }}" class="hover:text-[#FF6B00] transition">瀏覽貼文</a>
                <a href="{{ url_for('index', view='item') }}" class="hover:text-[#FF6B00] transition">瀏覽單品</a>
                {% if session.get('user_id') %}
                    <a href="{{ url_for('post_item') }}" class="text-[#FF6B00] hover:text-[#FF8A3D] transition">+ 我要贈送</a>
                {% endif %}
            </div>

            <div class="flex items-center space-x-4">
                {% if session.get('user_id') %}
                    <a href="{{ url_for('profile') }}" class="flex items-center space-x-2 hover:text-[#FF6B00]">
                        <i data-feather="user" class="w-5 h-5"></i>
                        <span>{{ session['username'] }}</span>
                    </a>
                    <a href="{{ url_for('logout') }}" class="text-xs bg-gray-800 px-3 py-1.5 rounded-lg hover:bg-red-600 transition">登出</a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="text-sm border border-[#FF6B00] text-[#FF6B00] px-4 py-2 rounded-xl hover:bg-[#FF6B00] hover:text-white transition">登入 / 註冊</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <main class="flex-grow container mx-auto px-4 py-8">
        {% block content %}{% endblock %}
    </main>

    <footer class="bg-white border-t border-gray-200 py-8 text-center text-gray-400 text-sm">
        <p>© 2025 交大/清大智慧贈物共享平台</p>
    </div>

    <script>
        feather.replace();
        // 自動消失的 Flash 訊息處理
        {% with messages = get_flashed_messages() %}
          {% if messages %}
            {% for message in messages %}
                alert('{{ message }}');
            {% endfor %}
          {% endif %}
        {% endwith %}
    </script>
</body>
</html>